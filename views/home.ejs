<!DOCTYPE html>
<html lang="en">
 <head>
 	<meta charset="UTF-8" />
 	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
 	<link type="text/css" rel="stylesheet" href="/css/home.css">
 	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
 	<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
 </head>
 <body>
 	<div class="wrapper">
 	<% if (tickets.length > 0) { %>
 	<table class="styled-table">
 		<thead>
 			<tr>
 				<th>Ticket Id</th>
 				<th>Ticket Status</th>
 				<th>More Details</th>
 			</tr>
 		</thead>
 		<tbody>
 			<% tickets.forEach(function(ticket) { %>
 	    		<tr>
 	  				<td><%=ticket.id%></td>
 	  				<td><%=ticket.status%></td>
 	  				<td>
                    <button class="btn btn-outline-dark more-details-btn" data-bs-toggle="modal" data-bs-target="#ticketModal-<%= ticket.id %>">More Details</button>
 	  				</td>
 	  			</tr>
 	  			 <div class="modal fade" id="ticketModal-<%= ticket.id %>" tabindex="-1" role="dialog" aria-labelledby="ticketModalLabel" aria-hidden="true">
  					<div class="modal-dialog" role="document">
    					<div class="modal-content">
      						<div class="modal-header">
        						<h5 class="modal-title" id="ticketModalLabel"><%=ticket.subject%></h5>
        						<button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          							<span aria-hidden="true">&times;</span>
        						</button>
      						</div>
      						<div class="modal-body">
        ...                     <p><%=ticket.description%></p>
      						</div>
      						<div class="modal-footer">
       				 			<span>Created At: <%=ticket.created_at%></span>
       						</div>
    					</div>
  					</div>
				</div>
 	  		<% }); %>
 	  	</tbody>
 	</table>

    <% } else { %>
 	  <p id="errorMessage">No tickets.</p>
   	<% } %>
 	<div class="button-container">
 		<form method="get" action="/">
 			<input type="hidden" name="previouspage" value="<%= meta.before_cursor %>" />
 			<button id="prevButton" class="btn btn-outline-dark">Previous</button>
 		</form>
 		<form method="get" action="/">
 			<input type="hidden" name="nextpage" value="<%= meta.after_cursor %>" />
 			<button id="nextButton" class="btn btn-outline-dark">Next</button>
 		</form>
 	</div>
   </div>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
   <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
 </body>
 
</html>